# Вычисление рабочих дней

## Задание 

Создайте внешнюю обработку «Вычисление рабочих дней».  

Данная обработка должна вычислять количество рабочих дней в году, исходя из следующих условий: 
- нерабочими днями считаются субботы и воскресенья; 
- праздниками являются 1 января, 23 февраля и 8 марта; 
- если праздничный день попадает на субботу или воскресенье, то он не переносится.  

Обеспечьте, чтобы обработка выдала данные о количестве рабочих дней за следующие 10 лет. Выводить информацию нужно в следующем формате: год – количество рабочих дней. Для вывода информации используйте функцию «Сообщить()». 
Например: 2010 год – 258 рабочих дней 2011 год – 260 рабочих дней …  

Кроме этого, создать структуру «ВыходныеДни». Ключом структуры является слово «Год» и номер года (например, «Год2012»), а значением количество рабочих дней. 
Проверьте, что возможно следующее обращение к данным структуры: 
Сообщить(ВыходныеДни.Год2014). 

## Решение

```
&НаКлиенте
Процедура ВывестиРабочиеДни(Команда)
	
	Если ГодНачала >= 2000 Тогда 
		ВыходныеДни = Новый Структура; 
		ВывестиРабДниДесятиЛет(ГодНачала, ВыходныеДни);
		Сообщить(ВыходныеДни.Год2014);
	Иначе                                           
		Сообщить("Год начала должен быть больше или равен 2000");		
	КонецЕсли;	
	
КонецПроцедуры


Процедура ВывестиРабДниДесятиЛет(ГодНачала, ВыходныеДни)

	КолВоРабочихДнейГода = 0;
	Для Счетчик = 0 По 10 Цикл                  
		ТекущийГод = Строка(ГодНачала + Счетчик);  
		ТекущийГод = СтрЗаменить(ТекущийГод, Символы.НПП, "");;
		КолВоРабочихДнейГода = ПолучитьКолВоРабДнейГода(ТекущийГод);
		ВыходныеДни.Вставить("Год" + ТекущийГод, КолВоРабочихДнейГода);
	КонецЦикла;
	
	Год = "2000";
	Для Каждого Элемент Из ВыходныеДни Цикл  
		Год = Сред(Элемент.Ключ, 4, 4);
		СтрокаДляВывода = Год + " год - " + Элемент.Значение + " рабочих дней";
		Сообщить(СтрокаДляВывода);
	КонецЦикла; 
	
КонецПроцедуры


Функция ПолучитьКолВоРабДнейГода(Год)   
	
	КолВоРабДнейГода = 0;
	Для Счетчик = 1 По 12 Цикл
		Мес = Строка(Счетчик);
		Если Счетчик < 10 Тогда
			Мес = "0" + Мес;
		КонецЕсли;
		ДатаМесяца = Год + Мес + "01000000";
		КолВоРабДнейМесяца = ПолучитьКолВоРабДнейМесяца(ДатаМесяца);
		КолВоРабДнейГода = КолВоРабДнейГода + КолВоРабДнейМесяца;  
	КонецЦикла; 
	
	Возврат КолВоРабДнейГода;
	
КонецФункции


Функция ПолучитьКолВоРабДнейМесяца(ДатаМесяца)
	
	РабочиеДни = 0;
	НачалоМес = НачалоМесяца(ДатаМесяца); 
	КонецМес = КонецМесяца(ДатаМесяца);       
	
	Пока НачалоМес <= КонецМес Цикл   
		ДеньНед = ДеньНедели(НачалоМес);
		Если ДеньНед <> 6 И ДеньНед <> 7 Тогда
			РабочиеДни = РабочиеДни + 1;
		КонецЕсли;  
		НачалоМес = НачалоМес + 86400;   
	КонецЦикла;

	// Учет праздников
	МесяцЧислом = Месяц(ДатаМесяца);	
	НачалоМес = НачалоМесяца(ДатаМесяца);
	
	// 1 января
	Если МесяцЧислом = 1 Тогда
		ДеньНед = ДеньНедели(НачалоМес);
		Если ДеньНед <> 6 И ДеньНед <> 7 Тогда
			РабочиеДни = РабочиеДни - 1;
		КонецЕсли;  
			
	// 23 февраля
	ИначеЕсли МесяцЧислом = 2 Тогда
		ДеньНед = ДеньНедели(НачалоМес + 86400 * 22);
		Если ДеньНед <> 6 И ДеньНед <> 7 Тогда
			РабочиеДни = РабочиеДни - 1;
		КонецЕсли;  				
		
	// 8 марта
	ИначеЕсли МесяцЧислом = 3 Тогда    
		ДеньНед = ДеньНедели(НачалоМес + 86400 * 7);
		Если ДеньНед <> 6 И ДеньНед <> 7 Тогда
			РабочиеДни = РабочиеДни - 1;
		КонецЕсли;  		
	КонецЕсли;

	Возврат РабочиеДни;	             	

КонецФункции

```
